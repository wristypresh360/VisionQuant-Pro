# 如何查看索引重建进度

## 📊 快速查看方法

### 方法1: 查看日志最后几行（推荐）
```bash
cd /Users/bytedance/PycharmProjects/pythonProject/VisionQuant-Pro
tail -3 logs/rebuild_index.log
```

### 方法2: 实时监控（动态更新）
```bash
tail -f logs/rebuild_index.log
```
按 `Ctrl+C` 退出监控

### 方法3: 检查进程状态
```bash
ps aux | grep rebuild_index_attention.py | grep -v grep
```

### 方法4: 检查输出文件大小（间接判断）
```bash
ls -lh data/indices/cae_faiss_attention.bin 2>/dev/null
wc -l data/indices/meta_data_attention.csv 2>/dev/null
```

---

## ⏱️ 时间对比

### 之前（生成40万张图片）
- **任务**：从股票数据生成K线图PNG文件
- **耗时**：可能数小时到数天
- **原因**：
  - 需要下载股票数据
  - 需要绘制K线图
  - 需要保存PNG文件（I/O密集）

### 现在（重建索引）
- **任务**：用已训练好的AttentionCAE模型编码已有图片
- **耗时**：约30-40分钟
- **原因**：
  - 图片已存在，只需读取
  - 模型已训练好，只需推理（forward pass）
  - 使用MPS GPU加速（Mac）
  - 主要是计算，I/O较少

---

## 🚀 为什么这次更快？

1. **不需要生成图片**：图片已存在，只需读取
2. **GPU加速**：使用Apple MPS，速度约240-250张/秒
3. **纯推理**：不需要训练，只是特征提取
4. **批量处理**：FAISS索引构建是批量操作，效率高

---

## 📈 当前进度（示例）

```
已完成: 187,359 / 400,481 张 (46.8%)
剩余: 213,122 张
处理速度: ~245 张/秒
预计剩余时间: 14.5 分钟
```

---

## ⚠️ 注意事项

1. **不要中断进程**：如果中断，需要重新开始
2. **保持电脑运行**：不要休眠或关机
3. **检查磁盘空间**：确保有足够空间存储索引文件（约几GB）

---

## ✅ 完成标志

当看到以下信息时，表示重建完成：
```
✅ FAISS 索引重建完成！
索引文件: data/indices/cae_faiss_attention.bin
元数据文件: data/indices/meta_data_attention.csv
```
