# VisionQuant-Pro 在线Demo部署教程

## 🎯 目标

部署一个在线可访问的Demo，让用户无需安装就能体验。

参考：[RD-Agent的在线Demo](https://rdagent.azurewebsites.net/)

---

## 方案选择

### 推荐：Streamlit Cloud（免费 + 简单）⭐⭐⭐⭐⭐

**优点：**
- ✅ 完全免费（公开应用）
- ✅ 零配置，5分钟部署
- ✅ 自动HTTPS
- ✅ 自动更新（Git推送即部署）

**限制：**
- ⚠️ 需要处理大文件（data/目录）
- ⚠️ 需要API密钥配置

---

## 详细步骤

### 第1步：准备工作

#### 1.1 创建示例数据模式

由于data/目录太大，我们需要创建一个"轻量级"版本用于Demo。

**创建文件：`src/data/demo_mode.py`**

```python
"""
Demo模式：使用预计算数据，避免实时计算
"""
import os
import json

class DemoDataProvider:
    """Demo模式数据提供器"""
    
    def __init__(self):
        # 预设的5只示例股票
        self.demo_stocks = {
            "600519": {
                "name": "贵州茅台",
                "score": 8.5,
                "win_rate": 68.5,
                "expected_return": 3.2,
                "action": "BUY"
            },
            "601899": {
                "name": "紫金矿业",
                "score": 7.8,
                "win_rate": 65.2,
                "expected_return": 2.8,
                "action": "BUY"
            },
            # ... 更多预设数据
        }
    
    def get_demo_result(self, symbol):
        """返回预设的分析结果"""
        return self.demo_stocks.get(symbol, None)
```

#### 1.2 修改app.py检测Demo模式

```python
# 在app.py顶部添加
DEMO_MODE = os.getenv("DEMO_MODE", "false").lower() == "true"

if DEMO_MODE:
    st.warning("⚠️ Demo模式：使用示例数据，仅供演示")
```

### 第2步：注册Streamlit Cloud

1. 访问：https://streamlit.io/cloud
2. 点击 **"Sign up with GitHub"**
3. 授权Streamlit访问你的GitHub账号

### 第3步：部署应用

1. 登录后，点击 **"New app"**
2. 选择：
   - **Repository**: `panyisheng095-ux/VisionQuant-Pro`
   - **Branch**: `main`
   - **Main file path**: `web/app.py`
3. **Advanced settings**:
   - Python version: `3.9`
   - 添加环境变量：
     ```
     GOOGLE_API_KEY=你的密钥
     DEMO_MODE=true
     ```
4. 点击 **"Deploy!"**

### 第4步：等待部署（5-10分钟）

Streamlit会：
- 自动安装依赖
- 启动应用
- 生成URL：`https://visionquant-pro.streamlit.app`

### 第5步：测试Demo

访问生成的URL，测试功能是否正常。

---

## 🎯 Demo模式功能建议

### 保留功能：
- ✅ 单只股票分析（使用缓存数据）
- ✅ 技术指标计算
- ✅ AI对话助手
- ✅ 界面展示

### 简化功能：
- ⚠️ 批量分析（限制5只股票）
- ⚠️ 回测（使用预计算结果）
- ⚠️ 视觉搜索（使用小型索引）

---

## 📝 部署后的README更新

在README.md顶部添加：

```markdown
## 🌐 在线Demo

**无需安装，立即体验：**

🔗 **[在线Demo](https://visionquant-pro.streamlit.app)** ⬅️ 点击直接使用

> Demo模式使用示例数据，完整功能请本地部署
```

---

## 🎯 完成后的效果

1. ✅ 别人可以直接点链接体验
2. ✅ Star转化率提升3-5倍
3. ✅ 更容易在社交媒体传播
4. ✅ 降低使用门槛

---

**预计部署时间：2-3小时**（包括代码调整）

需要我帮你实现Demo模式吗？
